index.php
<?php
session_start();
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Football Match Management</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        form { background-color: #f4f4f4; padding: 20px; margin-bottom: 20px; }
        input, select { margin: 10px 0; width: 100%; padding: 5px; }
        .result { background-color: #e0e0e0; padding: 10px; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Football Match Management System</h1>

    <!-- Add New Match Form -->
    <form action="add_match.php" method="post">
        <h2>Add New Match</h2>
        <label>Date of Match:</label>
        <input type="date" name="date_of_match" required>
        
        <label>Time of Match:</label>
        <input type="time" name="time_of_match" required>
        
        <label>Round:</label>
        <select name="round" required>
            <option value="QS">Quarter Semi</option>
            <option value="R32">Round of 32</option>
            <option value="R16">Round of 16</option>
            <option value="QF">Quarter Finals</option>
            <option value="SF">Semi Finals</option>
            <option value="F">Final</option>
        </select>
        
        <label>Stadium Name:</label>
        <input type="text" name="stadium_name" required>
        
        <label>Team 1 ID:</label>
        <input type="number" name="team1_ID" required>
        
        <label>Team 2 ID:</label>
        <input type="number" name="team2_ID" required>
        
        <label>Referee ID:</label>
        <input type="number" name="referee_ID" required>
        
        <input type="submit" value="Add Match">
    </form>

    <!-- Register Goal Form -->
    <form action="register_goal.php" method="post">
        <h2>Register Goal</h2>
        <label>Match ID:</label>
        <input type="number" name="match_ID" required>
        
        <label>Player ID:</label>
        <input type="number" name="player_ID" required>
        
        <label>Goal Minute:</label>
        <input type="number" name="goal_minute" required>
        
        <label>Goal Type:</label>
        <select name="goal_type" required>
            <option value="FG">Field Goal</option>
            <option value="OG">Own Goal</option>
            <option value="P">Penalty</option>
            <option value="FK">Free Kick</option>
        </select>
        
        <input type="submit" value="Register Goal">
    </form>

    <!-- Team Performance Form -->
    <form action="team_performance.php" method="post">
        <h2>Team Performance Report</h2>
        <label>Team ID:</label>
        <input type="number" name="team_ID" required>
        
        <input type="submit" value="Get Team Performance">
    </form>

    <?php
    if (isset($_SESSION['result'])) {
        echo "<div class='result'>" . $_SESSION['result'] . "</div>";
        unset($_SESSION['result']);
    }
    ?>
</body>
</html>

db_connection.php
<?php
$servername = "localhost";
$username = "your_username";  // Replace with your database username
$password = "your_password";  // Replace with your database password
$dbname = "football_tournament";  // Replace with your database name

// Create connection
$conn = new mysqli($servername, $username, $password, $dbname);

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}
?>

add_match.php
<?php
session_start();
require 'db_connection.php';

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $date_of_match = $_POST['date_of_match'];
    $time_of_match = $_POST['time_of_match'];
    $round = $_POST['round'];
    $stadium_name = $_POST['stadium_name'];
    $team1_ID = $_POST['team1_ID'];
    $team2_ID = $_POST['team2_ID'];
    $referee_ID = $_POST['referee_ID'];

    // Prepare and execute the stored procedure
    $stmt = $conn->prepare("CALL add_new_match(?, ?, ?, ?, ?, ?, ?)");
    $stmt->bind_param("ssssiis", $date_of_match, $time_of_match, $round, $stadium_name, $team1_ID, $team2_ID, $referee_ID);
    
    try {
        $stmt->execute();
        $result = $stmt->get_result();
        $row = $result->fetch_assoc();
        
        $_SESSION['result'] = "New Match Added Successfully! Match ID: " . $row['New Match ID'];
    } catch (Exception $e) {
        $_SESSION['result'] = "Error: " . $e->getMessage();
    }
    
    $stmt->close();
    $conn->close();
    
    header("Location: index.php");
    exit();
}
?>

register_goal.php
<?php
session_start();
require 'db_connection.php';

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $match_ID = $_POST['match_ID'];
    $player_ID = $_POST['player_ID'];
    $goal_minute = $_POST['goal_minute'];
    $goal_type = $_POST['goal_type'];

    // Prepare and execute the stored procedure
    $stmt = $conn->prepare("CALL register_goal(?, ?, ?, ?)");
    $stmt->bind_param("iisi", $match_ID, $player_ID, $goal_minute, $goal_type);
    
    try {
        $stmt->execute();
        $result = $stmt->get_result();
        $row = $result->fetch_assoc();
        
        $_SESSION['result'] = "Goal Registered Successfully! Goal ID: " . $row['goal_ID'] . 
                               "<br>Scorer: " . $row['Scorer'] . 
                               "<br>Goal Type: " . $row['goal_type'] . 
                               "<br>Goal Minute: " . $row['goal_minute'];
    } catch (Exception $e) {
        $_SESSION['result'] = "Error: " . $e->getMessage();
    }
    
    $stmt->close();
    $conn->close();
    
    header("Location: index.php");
    exit();
}
?>

team_performance.php
<?php
session_start();
require 'db_connection.php';

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $team_ID = $_POST['team_ID'];

    // Prepare and execute the stored procedure
    $stmt = $conn->prepare("CALL get_team_performance(?)");
    $stmt->bind_param("i", $team_ID);
    
    try {
        $stmt->execute();

        // Output a detailed report
        $output = "<h2>Team Performance Report for Team ID: $team_ID</h2>";

        // Team Information
        $stmt->nextResult();
        $result = $stmt->get_result();
        $team_info = $result->fetch_assoc();
        $output .= "<h3>Team Info</h3>";
        $output .= "Team Name: " . $team_info['team_Name'] . "<br>";
        $output .= "FIFA Ranking: " . $team_info['Fifa_Ranking'] . "<br>";
        $output .= "Total Goals: " . $team_info['Total_Goals'] . "<br>";
        $output .= "Total Points: " . $team_info['Total_Points'] . "<br>";
        $output .= "Total Matches Played: " . $team_info['total_matches_played'] . "<br>";

        // Manager Information
        $stmt->nextResult();
        $result = $stmt->get_result();
        $manager_info = $result->fetch_assoc();
        $output .= "<h3>Manager</h3>";
        $output .= "Name: " . $manager_info['manager_name'] . "<br>";
        $output .= "Yellow Cards: " . $manager_info['yellow_cards'] . "<br>";
        $output .= "Red Cards: " . $manager_info['red_cards'] . "<br>";

        // Player Information
        $stmt->nextResult();
        $result = $stmt->get_result();
        $output .= "<h3>Players</h3>";
        while ($player = $result->fetch_assoc()) {
            $output .= "Name: " . $player['player_name'] . 
                       " | Position: " . $player['position'] . 
                       " | Shirt Number: " . $player['shirt_number'] . 
                       " | Yellow Cards: " . $player['yellow_cards'] . 
                       " | Red Cards: " . $player['red_cards'] . "<br>";
        }

        // Sponsors
        $stmt->nextResult();
        $result = $stmt->get_result();
        $output .= "<h3>Sponsors</h3>";
        while ($sponsor = $result->fetch_assoc()) {
            $output .= $sponsor['sponsor_name'] . "<br>";
        }

        $_SESSION['result'] = $output;
    } catch (Exception $e) {
        $_SESSION['result'] = "Error: " . $e->getMessage();
    }
    
    $stmt->close();
    $conn->close();
    
    header("Location: index.php");
    exit();
}
?>
